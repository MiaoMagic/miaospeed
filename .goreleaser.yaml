builds:
  - id: miaospeed
    dir: .
    binary: miaospeed
    env:
      - BRAND=miaospeed
      - CGO_ENABLED=0
    ldflags:
      - -s -w -X 'main.COMMIT={{.Commit}}' -X 'main.BUILDCOUNT={{.Env.BUILDCOUNT}}' -X 'main.BRAND={{.Env.BRAND}}' -X 'main.COMPILATIONTIME={{.Env.COMPILATIONTIME}}' -tags core
    goos:
      - darwin
      - linux
      - windows
  - id: miaospeed.meta
    dir: .
    binary: miaospeed.meta
    env:
      - BRAND=miaospeed.meta
      - CGO_ENABLED=0
    ldflags:
      - -s -w -X 'main.COMMIT={{.Commit}}' -X 'main.BUILDCOUNT={{.Env.BUILDCOUNT}}' -X 'main.BRAND={{.Env.BRAND}}' -X 'main.COMPILATIONTIME={{.Env.COMPILATIONTIME}}' -tags meta
    goos:
      - darwin
      - linux
      - windows
    hooks:
      pre: ./build.release.hook.pre.sh
      post: ./build.release.hook.post.sh
archives:
  - files:
    - README.md
release:
  github:
    owner: moshaoli688
    name: miaospeed
